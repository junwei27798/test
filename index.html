<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‰‰å†°é»é¤</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1rem;
      background: #f5f5f5;
    }
    h2 {
      margin-top: 1.5rem;
    }
    .ingredient-group {
      display: flex;
      flex-wrap: wrap;
    }
    .ingredient {
      margin: 0.5rem;
    }
    button {
      margin-top: 1.5rem;
      padding: 1rem;
      font-size: 1.2rem;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      width: 100%;
    }
  </style>
</head>
<body>

  <h1>å‰‰å†°é»é¤</h1>

  <h2>åŸºæœ¬é…æ–™ï¼ˆæœ€å¤š 4 ç¨®ï¼‰</h2>
  <div class="ingredient-group" id="basic-ingredients">
    <!-- é…æ–™é¸é …æœƒç”± JS å‹•æ…‹ç”¢ç”Ÿ -->
  </div>

  <h2>é¡å¤–é…æ–™ï¼ˆå¦åŠ åƒ¹ï¼‰</h2>
  <div class="ingredient-group" id="extra-ingredients">
    <!-- é…æ–™é¸é …æœƒç”± JS å‹•æ…‹ç”¢ç”Ÿ -->
  </div>

  <button onclick="submitOrder()">é€å‡ºè¨‚å–®</button>

  <script>
    const ingredients = ["ä»™è‰", "æ„›ç‰", "ç´…è±†", "ç¶ è±†", "èŠ‹åœ“", "åœ°ç“œåœ“", "ç²‰åœ“", "ç²‰ç²¿", "ç±³è‹”ç›®", "QQ", "ç…‰ä¹³", "å·§å…‹åŠ›é†¬"];

    // å»ºç«‹é…æ–™é¸é …
    ingredients.forEach(name => {
      const basicDiv = document.getElementById('basic-ingredients');
      const extraDiv = document.getElementById('extra-ingredients');

      basicDiv.innerHTML += `
        <label class="ingredient">
          <input type="checkbox" class="basic" value="${name}" onchange="limitBasic()"> ${name}
        </label>
      `;
      extraDiv.innerHTML += `
        <label class="ingredient">
          <input type="checkbox" class="extra" value="${name}"> ${name}
        </label>
      `;
    });

    function limitBasic() {
      const checked = document.querySelectorAll('.basic:checked');
      const allBasic = document.querySelectorAll('.basic');
      if (checked.length >= 4) {
        allBasic.forEach(input => {
          if (!input.checked) input.disabled = true;
        });
      } else {
        allBasic.forEach(input => input.disabled = false);
      }
    }

    function submitOrder() {
      const basic = [...document.querySelectorAll('.basic:checked')].map(el => el.value);
      const extra = [...document.querySelectorAll('.extra:checked')].map(el => el.value);

      if (basic.length === 0) {
        alert("è«‹è‡³å°‘é¸æ“‡ 1 ç¨®åŸºæœ¬é…æ–™");
        return;
      }

      const orderText = `ğŸ“¥ æ–°è¨‚å–®ï¼š
åŸºæœ¬é…æ–™ï¼š${basic.join('ã€')}
é¡å¤–é…æ–™ï¼š${extra.length > 0 ? extra.join('ã€') : 'ç„¡'}`;

      sendToLine(orderText);
    }

    function sendToLine(message) {
      fetch('https://script.google.com/macros/s/AKfycbzi56Uwej1AlDRkb2VQvbQ7xh6I6oSb9r-gHCv1GlXH3ThvSSbK1QE41snlAOL_Jm8J/exec', {
        method: 'POST',
        mode: 'no-cors', // å¯æ”¹æˆ 'cors' ç”¨æ–¼æ¸¬è©¦
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ message })
      });

      alert("è¨‚å–®å·²é€å‡ºï¼");
      document.querySelectorAll('input[type=checkbox]').forEach(cb => {
        cb.checked = false;
        cb.disabled = false;
      });
    }
  </script>

</body>
</html>
